"use strict";(self.webpackChunkvolca_docs=self.webpackChunkvolca_docs||[]).push([[816],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=a.createContext({}),c=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(i.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(n),h=r,m=p["".concat(i,".").concat(h)]||p[h]||d[h]||o;return n?a.createElement(m,s(s({ref:t},u),{},{components:n})):a.createElement(m,s({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,s=new Array(o);s[0]=h;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l[p]="string"==typeof e?e:r,s[1]=l;for(var c=2;c<o;c++)s[c]=n[c];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},2798:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var a=n(7462),r=(n(7294),n(3905));const o={slug:"/configure-aws"},s="3. Configure AWS",l={unversionedId:"project-setup/configure-aws",id:"project-setup/configure-aws",title:"3. Configure AWS",description:"Follow the below steps to deploy your application to AWS and make it accessible to your users.",source:"@site/docs/project-setup/03-configure-aws.md",sourceDirName:"project-setup",slug:"/configure-aws",permalink:"/docs/configure-aws",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{slug:"/configure-aws"},sidebar:"tutorialSidebar",previous:{title:"2. Run locally",permalink:"/docs/run-locally"},next:{title:"4. Deploy to AWS",permalink:"/docs/deploy-to-aws"}},i={},c=[{value:"Create an AWS account",id:"create-an-aws-account",level:3},{value:"Create an IAM user",id:"create-an-iam-user",level:3},{value:"Set up the AWS CLI with your access keys",id:"set-up-the-aws-cli-with-your-access-keys",level:3},{value:"Testing the credentials",id:"testing-the-credentials",level:3}],u={toc:c};function p(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"3-configure-aws"},"3. Configure AWS"),(0,r.kt)("p",null,"Follow the below steps to deploy your application to AWS and make it accessible to your users."),(0,r.kt)("h3",{id:"create-an-aws-account"},"Create an AWS account"),(0,r.kt)("p",null,"To get started, you need to create an AWS account. Follow the ",(0,r.kt)("a",{parentName:"p",href:"https://aws.amazon.com/premiumsupport/knowledge-center/create-and-activate-aws-account/"},"official AWS documentation")," on how to set one up."),(0,r.kt)("h3",{id:"create-an-iam-user"},"Create an IAM user"),(0,r.kt)("p",null,"Once you have created an AWS account, you will be signed in as the root user. This user has access to ",(0,r.kt)("em",{parentName:"p"},"everything")," inside the account and should not be used for anything other than administrating the account. For your everyday access, an IAM user should be created."),(0,r.kt)("p",null,"Follow the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_users_create.html"},"instructions from AWS on how to create an IAM user")," with the following configuration:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Access key")," - Allow programmatic access"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Password")," - AWS Management Console access"),(0,r.kt)("li",{parentName:"ul"},"In the next step: Set permissions -> Attach existing policies directly -> Choose AdministratorAccess"),(0,r.kt)("li",{parentName:"ul"},'Skip the "Add tags" step and proceed'),(0,r.kt)("li",{parentName:"ul"},"Click create user and copy the generated access key ID as well as the secret access key, we will use those in the next step.")),(0,r.kt)("p",null,"The next time you log in to the AWS Console, you should always use the user that you just created. Also make sure to add MFA authentication to your root user to further secure your AWS account."),(0,r.kt)("h3",{id:"set-up-the-aws-cli-with-your-access-keys"},"Set up the AWS CLI with your access keys"),(0,r.kt)("p",null,"To get programmatic access to your AWS account, we need to configure a set of access keys that will be used when deploying from your local machine."),(0,r.kt)("p",null,"Open the file ",(0,r.kt)("inlineCode",{parentName:"p"},"~/.aws/config")," in a text editor and append the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text",metastring:'title="~/.aws/config"',title:'"~/.aws/config"'},"[volca]\nregion=eu-west-1\noutput=json\n")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"region")," property will decide which AWS region your Volca application will be deployed to. To help you choose a region there is a ",(0,r.kt)("a",{parentName:"p",href:"https://aws.amazon.com/blogs/architecture/what-to-consider-when-selecting-a-region-for-your-workloads/"},"guide from AWS"),", however we suggest to pick the region that will be closest to your end users."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"[volca]")," is the name of the AWS profile, feel free to change it to whatever you want."),(0,r.kt)("p",null,"Save the file and open ",(0,r.kt)("inlineCode",{parentName:"p"},"~/.aws/credentials")," in a text editor and append the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text",metastring:'title="~/.aws/credentials"',title:'"~/.aws/credentials"'},"[volca]\naws_access_key_id=<YOUR_AWS_ACCESS_KEY>\naws_secret_access_key=<YOUR_AWS_SECRET_ACCESS_KEY>\n")),(0,r.kt)("p",null,"Use the values that you copied while creating the IAM user."),(0,r.kt)("h3",{id:"testing-the-credentials"},"Testing the credentials"),(0,r.kt)("p",null,"Now that you have set up your credentials, you can test the connection to AWS using the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"AWS_PROFILE=volca aws sts get-caller-identity\n")),(0,r.kt)("p",null,"Which should output information about your AWS user and account:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'{\n    "UserId": "**********************",\n    "Account": "************",\n    "Arn": "arn:aws:iam::************:user/your.username"\n}\n')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"AWS_PROFILE")," determines which credentials from the ",(0,r.kt)("inlineCode",{parentName:"p"},"~/.aws/credentials")," file that will be used to call AWS. You can either set it explicitly in each command that calls AWS or set a default ",(0,r.kt)("inlineCode",{parentName:"p"},"AWS_PROFILE")," environment variable in your environment."),(0,r.kt)("p",null,"In the next section we will go over how to configure Stripe in order to collect payments from your customers."))}p.isMDXComponent=!0}}]);